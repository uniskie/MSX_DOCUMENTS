# FMBIOS MUSIC DATA


## メロディ6音+リズム構成のヘッダ

| adr. | value          | size    | desc. |
|------|----------------|---------|-------|
| +00H | 0EH            | 1バイト | mode  |
| +01H | 00H            | 1バイト | blank |
| +02H | CH1 オフセット | 2バイト |       |
| +04H | CH2 オフセット | 2バイト |       |
| +06H | CH3 オフセット | 2バイト |       |
| +08H | CH4 オフセット | 2バイト |       |
| +0AH | CH5 オフセット | 2バイト |       |
| +0CH | CH6 オフセット | 2バイト |       |
| +0EH | データ本体


## メロディ9音構成のヘッダ

| adr. | value          | size    | desc. |
|------|----------------|---------|-------|
| +00H | 12H            | 1バイト | mode  |
| +01H | 00H            | 1バイト | blank |
| +02H | CH1 オフセット | 2バイト |       |
| +04H | CH2 オフセット | 2バイト |       |
| +06H | CH3 オフセット | 2バイト |       |
| +08H | CH4 オフセット | 2バイト |       |
| +0AH | CH5 オフセット | 2バイト |       |
| +0CH | CH6 オフセット | 2バイト |       |
| +0EH | CH7 オフセット | 2バイト |       |
| +10H | CH8 オフセット | 2バイト |       |
| +12H | CH9 オフセット | 2バイト |       |
| +14H | データ本体

## データ本体

| value      | 意味         | 補足                                                                 |
|------------|--------------|----------------------------------------------------------------------|
|  00H       | 休符         | 続く1バイトが音長。音長が0FFHのときはさらに続く1バイトも音長に加算。 |
|  01H～ 5FH | 音程         | 続く1バイトが音長。音長が0FFHのときはさらに続く1バイトも音長に加算。 |
|  60H～ 6FH | 音量         | この値から60Hを引いた値が、音量として使用される。                    |
|  70H～ 7FH | 音色         | この値から70Hを引いた値が、音色番号として使用される。                |
|  80H, 81H  | サスティン   | 80HでサスティンOFF。81HでサスティンON。                              |
|  82H       | 拡張音色     | 続く1バイトの値(0～63)がROMの内蔵音色番号。                          |
|  83H       | ユーザー音色 | 続く2バイトの値が音色データ先頭アドレス。                            |
|  84H       | レガートオフ | 音を音符毎に切る。                                                   |
|  85H       | レガートオン | 音を切らずにつなぐ。                                                 |
|  86H       | Q指定        | 続く1バイト(1～8)で指定。（レガートオン時は、Q指定を無視）           |
|  87H～0FEH | 未使用       |                                                                      |
|  0FFH      | 終了         | チャンネル毎のデータ終了。                                           |

## ユーザー音色データ

```
     |  7  |  6  |  5  |  4  |  3  |  2  |  1  |  0  |
====||=====|=====|=====|=====|=====|=====|=====|=====||=====|  
 +0 || AM  | VIB | EG  | KSR |        MULTIPLE       || (M) |  
----||-----|-----|-----|-----|-----------------------||-----|  
 +1 || AM  | VIB | EG  | KSR |        MULTIPLE       || (C) |  
----||-----------------------------------------------||-----|  
 +2 ||   KSL(M)  |     TOTAL LEVEL (MODULATOR)       || (M) |  
----||-----------------------------------------------||-----|  
 +3 ||   KSL(C)  | --  | DC  | DM  |    FEEDBACK     ||(C/M)|  
----||-----------------------|-----------------------||-----|  
 +4 ||      Attack Rate      |       Decay Rate      || (M) |  
----||-----------------------|-----------------------||-----|  
 +5 ||      Attack Rate      |       Decay Rate      || (C) |  
----||-----------------------|-----------------------||-----|  
 +6 ||     Sustain Level     |      Release Rate     || (C) |  
----||-----------------------|-----------------------||-----|  
 +7 ||     Sustain Level     |      Release Rate     || (C) |  
----||-----------------------|-----------------------||-----|  
```

